Configuration & Troubleshooting

## Contents of this package

* `bin` - scripts & tools (see below)
* `help` - help files in markdown
* `html` - static files (will be served automatically)
* `lib` - libraries
* `local` - files not to be stored in Git.
* `sql` - SQL schemas for MySQL and SQLite.
* `t` - tests
* `tpl` - templates using Template::Toolkit

## Configuration

Configuration is located at `local/potracheno.cfg`.
It uses a homebrewn ini-like format, which is a shame.
Format is as follows:

<code>
[section]
param = "value"
# ...
</code>

It is possible to use variables, like $(ROOT). This all has to be rewritten
in v.0.20+

The following sections are expected:

* `[db]` - database config, most likely just where the SQLite is.
* `[status]` - list of issue statuses.
Must be integer numbers from 1 to 100.
Status id 1 MUST be present, others are optional.
* `[system]` - `port`, `pidfile`, `error_log`, and `access_log`
* `[search]` - default search `limit`. Does not affect reports & browse,
which is a bug.

A usable configuration file is generated by Install.PL (see below).

## Scripts and tools

*All scripts described below have a --help option that outputs usage summary.*

* `Install.PL` - make a local installation of Potracheno.
Will create a local directory, put a default config there, and
also download Neaf framework if you don't have it and
make a fresh sqlite db.

* `Start.PL` - init-script accepting start, stop, and restart options.
Run Potracheno on a Unix-like system.

* bin/check-db.t - test whether the configured database is suitable
for Potracheno, by doing some simple requests.

* bin/lostpass.pl - force change password for a user.
There is no better password reset mechanism yet.

* bin/migrate.pl - dump & restore DB content. Use this script for backup,
or when updating the tool. I.e.

<code>
bin/migrate.pl --dump local/dump.txt
git pull
mv local/potracheno.sqlite local/potracheno.sqlite.bak
sqlite3 local/potracheno.sqlite <sql/potracheno.sqlite.sql
bin/migrate.pl --restore local/dump.txt
</code>

* bin/potracheno.psgi - finally, the application itself.
Unless Start.PL is being used, run it as 
<code>
plackup bin/potracheno.psgi
</code>

`bin/potracheno.psgi --list` will print a summary of enabled endpoints instead
and is a valid method of checking the application before running.

## Troubleshooting

Please reach out to the author of this package (khedin@gmail.com)
if you notice any bugs.
Feedback & patches welcome.

